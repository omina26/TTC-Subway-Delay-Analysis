---
title: "About"
output: html_document
---

### Introduction

As businesses increasingly encourage employees to return to in-oï¬€ice work, reliable transporta- tion is becoming more important than ever for commuters. Many workers rely on subway systems for their daily commutes. Subway delays can disrupt schedules, increase travel time uncertainty, and even influence long-term decisions about where people choose to live or work. While some delays may be unavoidable, understanding when and where these delays occur, as well as how external factors like weather conditions and population density contribute to service disruptions can help both commuters and policymakers make informed decisions.
This study investigates when and where subway delays occur within the Toronto Transit Com- mission (TTC) system and analyzes the impact of weather conditions and service population density on these delays using a merged dataset from multiple sources. Subway delay reports (see reference) were obtained from the City of Toronto Open Data Catalogue, providing details on location, time, and cause of delays across the TTC subway network. Service population estimates were derived from Toronto Neighbourhood Profiles (see reference), also sourced from the Open Data Catalogue, while spatial data for neighbourhoods and station locations was incorporated using the Toronto Neighbourhoods shapefile (see reference), TTC Subway and Streetcar Map (see reference) and OpenStreetMap API (see reference). Additionally, hourly weather data from 2024 was retrieved using the Open-meteo API (see reference), allowing for an assessment of temperature, precipitation, and other environmental factors at the time of each recorded delay.

### Methodology

To analyze the occurrence of subway delays and the potential impact of weather conditions and population density, this study integrates multiple datasets, combining transit delay re- ports, weather data, and demographic information. The TTC Subway Delay Data from 2024, acquired from the City of Toronto Open Data Catalogue, consists of 26,467 entries with de- tails on the date, time, day of the week, station, delay code (cause of delay), minutes of delay, minutes of gap between trains, train direction (bound), subway line, and vehicle ID. For this analysis, all columns were retained except for minutes of gap between trains and vehicle ID. To account for population density, Toronto Neighbourhood Profiles data from 2021, also sourced from the City of Toronto Open Data Catalogue, was incorporated. This dataset includes 158 entries with demographic information, from which only neighbourhood ID and total popu- lation were used to estimate the service population surrounding each station. Additionally, Toronto Neighbourhoods shapefile data, obtained from the City of Toronto Open Data Cata- logue, contained 158 entries and 12 columns and was used for geographic mapping.

To further enrich the analysis, a custom subway station dataframe was created by manually collecting the names of all 70 subway stations from the TTC Subway and Streetcar Map and retrieving station longitude and latitude coordinates using the OpenStreetMap API to allow for spatial integration with other dataframes. Weather conditions were incorporated using hourly weather data from 2024, retrieved from the Open-Meteo API, which contained 8,784 entries with columns detailing the date, temperature, relative humidity, apparent temperature, precipitation, rain, snowfall, snow depth, cloud cover, wind speed, wind direction, and wind gusts. All columns from this dataset were used to assess the impact of different weather variables on subway delays.

Once collected, the datasets underwent extensive cleaning and preprocessing to ensure con- sistency and usability. The TTC Subway Delay Data, originally containing 10 columns, was filtered to remove minutes of gap between trains and vehicle ID. Columns were renamed for clarity, and duplicate rows or rows with null values in the bound or line columns were removed. Subway station names were standardized, and a new hour column was created to facilitate merging with the weather dataframe. The day, station, code, bound, and line columns were converted to categorical types to improve usability during analysis. Most importantly, only observations with delays greater than zero minutes and less than or equal to 30 minutes were retained, reducing the dataset to 9,038 rows. The population dataframe was created by filtering the Toronto Neighbourhood Profiles data to retain only neighbourhood ID and population estimates. In the weather dataset, null values in the snow depth column were filled with zero, and an hour column was generated from the date column.

Data wrangling was performed to integrate these datasets into a unified structure. First, the Toronto Neighbourhoods shapefile was merged with the population dataframe using neighbour- hood IDs. Next, the stations dataframe was spatially joined with the neighbourhoods shapefile to identify neighborhoods within 0.5 km of a station, allowing service population estimates to be merged into the stations dataframe. The delay dataframe and weather dataframe were then merged on date and hour to create a comprehensive dataset. Finally, service population counts for each station were merged into this final dataset using station names as the key identifier.

To understand patterns in subway delays, summary statistics were computed for all numerical variables in the dataset. A histogram was generated to visualize the distribution of delay durations, highlighting the frequency of different delay times. The most common delay codes were identified, and their frequency was plotted to determine the predominant causes of disruptions. Additionally, delays were analyzed across subway lines, train directions (bounds), and stations to assess variations in delay occurrence by location.

Temporal analysis was conducted by examining delay frequencies and average delay durations by hour of the day. A bar plot illustrated the number of delays per hour, while a line plot showed fluctuations in average delay durations throughout the day. Spatial trends were further explored by identifying the top three stations per subway line with the highest delay occur- rences and comparing their average delay durations. A regression analysis was performed to evaluate the relationship between service population and delay duration, providing insights into whether higher-density areas experience more frequent or prolonged delays.

A correlation heatmap was generated to assess relationships between weather variables and subway delays. Finally, an ANOVA test was conducted to determine whether delay durations significantly differed across days of the week, stations, subway lines, and subway bounds, offering statistical validation of observed trends.

[ML methodology tbd]

